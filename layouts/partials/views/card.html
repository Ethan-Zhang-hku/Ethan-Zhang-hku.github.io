{{ $item := .item }}

{{ $link := $item.RelPermalink }}
{{ $target := "" }}
{{ if $item.Params.external_link }}
  {{ $link = $item.Params.external_link }}
  {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
{{ end }}

{{ $resource := partial "functions/get_featured_image.html" $item }}
{{ $anchor := $item.Params.image.focal_point | default "Center" }}

<a href="{{ $link }}" {{ $target | safeHTMLAttr }} class="block mb-5">
  <div class="md:flex border rounded-lg overflow-hidden shadow hover:shadow-lg transition">
    
    <!-- 图片区域 -->
    <div class="md:w-1/3 overflow-hidden flex items-center justify-center bg-gray-50 dark:bg-gray-800">
      {{ with $resource }}
        {{ $original_image := .Fit "808x455" }}
        {{ $responsive := partial "functions/process_responsive_image.html" (dict 
            "image" $original_image 
            "mode" "responsive"
            "sizes" (slice 320 480 655 808)
        ) }}
        
        <img class="w-full h-full object-contain hover:scale-105 transition duration-500 cursor-pointer"
             srcset="{{ $responsive.srcset }}"
             sizes="(max-width: 808px) 100vw, 33vw"
             src="{{ $responsive.fallback.RelPermalink }}" 
             width="{{ $original_image.Width }}" 
             height="{{ $original_image.Height }}"
             loading="lazy" 
             alt="{{ $item.Title | plainify }}">
      {{ end }}
    </div>

    <!-- 文字区域 -->
    <div class="p-6 md:w-2/3 flex flex-col justify-center">
      <h3 class="uppercase tracking-wide text-md text-primary-700 dark:text-primary-200 font-semibold">
        {{ $item.Title }}
      </h3>
      <p class="mt-2 text-sm leading-tight font-medium text-black dark:text-white">
        {{ ($item.Params.summary | default $item.Summary) | plainify | htmlUnescape | chomp -}}
      </p>
      <p class="mt-3 text-gray-500 dark:text-gray-400 text-sm">
        {{- $item.Date | time.Format (site.Params.locale.date_format | default ":date_long") -}}
      </p>
    </div>
  </div>
</a>
