{{/* layouts/partials/views/card.html - override for card view image handling */}}
{{ $item := . }}
<div class="wg-card">
  {{ $resource := partial "blox-core/functions/get_featured_image.html" $item }}
  {{ with $resource }}
    {{/* 使用 Fit 到 808x455（会在 808x455 限制内保留图片比例），然后用 CSS 填充白边 */}}
    {{ $image := .Fit "808x455" }}
    {{ if ne $image.MediaType.SubType "gif" }}
      {{ $image = $image.Process "webp" }}
    {{ end }}
    <a href="{{ $item.Permalink }}" title="{{ $item.Title }}">
      <img src="{{ $image.RelPermalink }}" width="{{ $image.Width }}" height="{{ $image.Height }}"
           class="article-banner" alt="{{ $item.Title }}" loading="lazy"
           style="width:808px;height:455px;object-fit:contain;background:#fff;display:block;">
    </a>
  {{ end }}

  <div class="card-body">
    <h3 class="card-title"><a href="{{ $item.Permalink }}">{{ $item.Title }}</a></h3>
  </div>
</div>
